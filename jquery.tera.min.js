!function(r){function n(r){var n=/(\s*)\{(\*?)/.exec(r);if(null===n)return null;var t,e=n.index+n[0].length,l=r.substr(e),u=(n[2]?0:n[1].length)+n.index;if(n[2]&&(t=/^\}\s*/.exec(l),null!==t))return{start:u,end:e+t[0].length,eval:m};for(var s=0;W>s;s++)if(t=V[s](l),null!==t)return t.start=u,t.end=t.len+e,t;return{start:e,end:e,eval:m}}function t(r){var n=/^(\s*(\*?)\})\s*/.exec(r);return null===n?null:n[2]?n[0].length:n[1].length}function e(r){return/^\s*/.exec(r)[0].length}function l(r){var n=/^(else-)?(if(-not)?|unless)(-(empty|key|val(?:ue)?|(first|last)))?/.exec(r);if(null===n)return null;var l,u,s=n[0].length,a=r.substr(s),i=n[1],o="if-not"===n[2]||"unless"===n[2];if(n[6])return l=t(a),null===l?null:{len:s+l,eval:K,invert:o,ifElse:i,pos:n[6]};var f=e(a);if(0===f)return null;if(s+=f,a=a.substr(f),"empty"===n[5])return u=y(a),null===u?null:(l=t(a.substr(u.len)),null===l?null:{len:s+u.len+l,eval:_,invert:o,ifElse:i,sub:u});if(u=c(a),null===u)return null;if(!n[5])return l=t(a.substr(u.len)),null===l?null:{len:s+u.len+l,eval:q,invert:o,ifElse:i,sub:u};s+=u.len,a=a.substr(u.len);var h=a.match(/^\s+in\s+/);if(null===h)return null;h=h[0].length,s+=h,a=a.substr(h);var v=y(a);return null===v?null:(l=t(a.substr(v.len)),null===l?null:{len:s+v.len+l,eval:B,invert:o,ifElse:i,ifKey:"key"===n[5],expr:u,sub:v})}function u(r){var n=/^each(\s+((?!\d)\w+)(\s+as\s+((?!\d)\w+))?(\s+at\s+((?!\d)\w+))? in)?/.exec(r);if(null===n)return null;var l=n[2],u=n[4],s=n[6],a=n[0].length,i=r.substr(a),o=e(i);if(0===o)return null;if(a+=o,i=i.substr(o),n=y(i),null===n)return null;a+=n.len,i=i.substr(n.len);var f=t(i);return null===f?null:{len:a+f,eval:C,sub:n,elem:l,key:u,index:s}}function s(r,n){return function(e){var l=r.exec(e);if(null===l)return null;var u=t(e.substr(l[0].length));return null===u?null:{len:l[0].length+u,eval:n}}}function a(r){var n=/^tmpl ([\w-]+)/.exec(r);if(null===n)return null;for(var l,u=n[1],s=[],a=n[0].length,i=r.substr(a);;){if(l=t(i),null!==l){a+=l;break}var o=e(i);if(a+=o,i=i.substr(o),n=c(i),null===n)return null;s.push(n),a+=n.len,i=i.substr(n.len)}return null===l?null:{len:a,eval:L,id:u,params:s}}function i(r){if("raw"!==r.substr(0,3))return null;var n=e(r.substr(3));if(1>n)return null;var l=3+n,u=y(r.substr(l));if(null===u)return null;l+=u.len;var s=t(r.substr(l));return null===s?null:{len:l+s,eval:k,sub:u}}function o(r){var n=0;if("esc"===r.substr(0,3)){var l=e(r.substr(3));l>=1&&(n=3+l)}var u=y(r.substr(n));if(null===u)return null;n+=u.len;var s=t(r.substr(n));return null===s?null:{len:n+s,eval:w,sub:u}}function f(r){var n=0,l=!1;if("json"===r.substr(0,4)){var u=e(r.substr(4));if(0===u)return null;n=4+u}else if("raw-json"===r.substr(0,8)){var u=e(r.substr(8));if(0===u)return null;n=8+u,l=!0}var s=y(r.substr(n));if(null===s)return null;n+=s.len;var a=t(r.substr(n));return null===a?null:{len:n+a,eval:l?x:j,sub:s}}function c(r){var n=v(r);if(null===n)return null;for(var t=n.len,l=r.substr(t),u=[n],s=[];;){var a=e(l),i=h(l.substr(a));if(null===i)break;if(a+=i.len,a+=e(l.substr(a)),n=v(l.substr(a)),null===n)break;a+=n.len,s.push(i.name),u.push(n),t+=a,l=l.substr(a)}return 1===u.length?n:{len:t,eval:z,operators:s,operands:u}}function h(r){var n=/^([!=<>]=|[<>+-]|&&|\|\|)/.exec(r);return null===n?null:{len:n[0].length,name:n[0]}}function v(r){var n;if("("===r.substr(0,1))return n=c(r.substr(1)),null!==n?null:")"!==r.substr(n.len+1,1)?null:{len:n.len+2,eval:N,sub:n};var t=[d,y,p];for(var e in t)if(n=t[e](r),null!==n)return n;return g(r)}function b(r){if("("!==r.substr(0,1))return null;var n=[],t=1+e(r.substr(1)),l=r.substr(t);if(")"===l.substr(0,1))return{len:t+1,eval:G,args:n};var u=c(l);if(null===u)return null;n.push(u),t+=u.len,l=l.substr(u.len);var s=e(l);for(t+=s,l=l.substr(s);;){var a=l.substr(0,1);if(")"===a)break;if(","!==a)return null;var i=1+e(l.substr(1));if(u=c(l.substr(i)),null===u)return null;n.push(u),i+=u.len,t+=i,l=l.substr(i),s=e(l),t+=s,l=l.substr(s)}return{len:t+1,eval:G,args:n}}function p(r){var n=/^(['"])((?!\1)[^\\]|\\.)*\1/.exec(r);return null===n?n:{len:n[0].length,eval:A,string:n[0]}}function g(r){var n=/^(-?)(\d+|0)(.\d+)?/.exec(r);return null===n?null:{len:n[0].length,eval:J,number:n[0]}}function y(r){var n=/^(\$(keys|[$ikld]|)|(?!\d)\w+)/.exec(r);if(null===n)return null;for(var t,e=n[1],l=n[0].length,u=r.substr(l),s=[];;)if(t=$(u),null===t)if(t=b(u),null===t){if(n=/^\.((?=[^\d])\w+)/.exec(u),null===n)break;s.push({eval:O,name:n[1]});var a=n[0].length;l+=a,u=u.substr(a)}else s.push(t),l+=t.len,u=u.substr(t.len);else s.push(t),l+=t.len,u=u.substr(t.len);return{len:l,eval:E,name:e,subs:s}}function $(r){if("["!==r.substr(0,1))return null;var n=c(r.substr(1));return null===n?null:"]"!==r.substr(1+n.len,1)?null:{len:2+n.len,eval:S,sub:n}}function d(r){if("{"!==r.substr(0,1))return null;for(var n=1,t=r.substr(1),l={};;){var u=/^\s*(\w+)\s*(:?)\s*/.exec(t);if(null===u)return null;var s=u[1],a=u[2],i=u[0].length;if(n+=i,t=t.substr(i),a){var o=c(t);if(null===o)return null;l[s]=o,n+=o.len,t=t.substr(o.len);var f=e(t);n+=f,t=t.substr(f)}else l[s]={len:0,eval:E,name:s,subs:[]};var h=t.substr(0,1);if("}"===h){n+=1,t=t.substr(1);break}if(","!==h)return null;n+=1,t=t.substr(1)}return{len:n,eval:T,object:l}}function m(){return""}function w(){return'"+this.escape('+this.sub.eval.apply(this.sub,arguments)+')+"'}function k(){return'"+'+this.sub.eval.apply(this.sub,arguments)+'+"'}function x(){return'"+this.json('+this.sub.eval.apply(this.sub,arguments)+')+"'}function j(){return'"+this.escape(this.json('+this.sub.eval.apply(this.sub,arguments)+'))+"'}function E(){for(var r=/^\$/.test(this.name)?this.name:"local."+this.name,n=this.subs.length,t=0;n>t;t++){var e=this.subs[t];r+=e.eval.apply(e,arguments)}return r}function O(){return"."+this.name}function S(){return"["+this.sub.eval.apply(this.sub,arguments)+"]"}function N(){return"("+this.sub.eval.apply(this.sub,arguments)+")"}function A(){return this.string}function J(){return this.number}function Q(){return"{"}function I(){return"}"}function D(){return'";}else{retval+="'}function F(){return'"}retval+="'}function P(){return'";$i++}}).call(this,$it,$t);retval+="'}function U(r,n){return'";'+(r?"}else ":"")+"if("+n+'){retval+="'}function K(){return U(this.ifElse,"$i"+(this.invert?"!=":"==")+("first"==this.pos?"0":"$l-1"))}function _(){return U(this.ifElse,"$t="+this.sub.eval.apply(this.sub,arguments)+","+(this.invert?"!":"")+"(jQuery.isArray($t)?$t.length===0:jQuery.isEmptyObject($t))")}function q(){return U(this.ifElse,(this.invert?"!":"")+"("+this.sub.eval.apply(this.sub,arguments)+")")}function B(){return U(this.ifElse,"$t="+this.sub.eval.apply(this.sub,arguments)+",$e="+this.expr.eval.apply(this.expr,arguments)+","+(this.invert?"!":"")+(this.ifKey?"jQuery.isArray($t)?$e>=0||$e<$t.length:jQuery.inArray($e,this.keys($t))!==-1":"jQuery.inArray($e,this.values($t))!==-1"))}function C(){var r='";$it='+this.sub.eval.apply(this.sub,arguments)+";$t=this.proto(local);(function($$,local){var $,$k,$keys,$i=0,$l=jQuery.isArray($$)?$$.length:($keys=this.keys($$),$keys.length);while($i<$l){$=(($k=$keys?$keys[$i]:$i),$$[$k]);";return this.elem&&(r+="local."+this.elem+"=$;"),this.key&&(r+="local."+this.key+"=$k;"),this.index&&(r+="local."+this.index+"=$i;"),r+'retval+="'}function L(){for(var r=this.params.length,n="",t=0;r>t;t++){var e=this.params[t];n+=","+e.eval.apply(e,arguments)}return'"+this.byId("'+this.id+'"'+n+')+"'}function T(){var r=[];for(var n in this.object){var t=this.object[n];r.push(n+":"+t.eval.apply(t,arguments))}return"{"+r.join(",")+"}"}function z(){for(var r=this.operands[0],n=r.eval.apply(r,arguments),t=this.operators.length,e=0;t>e;e++)r=this.operands[e+1],n+=this.operators[e]+r.eval.apply(r,arguments);return n}function G(){for(var r=[],n=this.args.length,t=0;n>t;t++){var e=this.args[t];r.push(e.eval.apply(e,arguments))}return"("+r.join(",")+")"}function H(r){return(r.match(/\n/g)||[]).length}function M(t){for(var e,l="",u=[],s=0;e=n(t);){if(e.eval===C)u.push(e.eval);else if(-1!==r.inArray(e.eval,X)){if(e.ifElse&&-1===r.inArray(u.pop(),X))throw new Error("Unexpected {else-if} on line "+(s+H(t.substr(0,e.start))));u.push(e.eval)}else if(e.eval===P){if(u.pop()!==C)throw new Error("Unexpected {/each} on line "+(s+H(t.substr(0,e.start))))}else if(e.eval===F&&-1===r.inArray(u.pop(),X))throw new Error("Unexpected {/if} on line "+(s+H(t.substr(0,e.start))));l+=R(t.substr(0,e.start))+e.eval(),s+=H(t.substr(0,e.end)),t=t.substr(e.end)}if(u.length>0)throw new Error("No closing tag for "+(u.pop()===C?"{each}":"{if}"));return l+=R(t),'var local=data,$=local,$d=attrData,$it,$t,$e,retval="'+l+'"; return retval'}function R(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}var V=[s(/^</,Q),s(/^>/,I),s(/^else/,D),s(/^\/(if|unless)/,F),s(/^\/each/,P),u,l,a,i,o,f],W=V.length,X=[K,_,q,B],Y=[],Z={},rn={},nn=function(n,t){var e;try{return n in Z==!1&&(e=M(n),Z[n]={func:new Function("data","attrData",e),code:e}),Z[n].func.call(nn,t)}catch(l){var u={template:n,code:Z[n].code,data:r.extend(!0,{},t),error:l.message};throw JSON&&JSON.stringify&&(u.data_json=JSON.stringify(t)),Y.push(u),l}};nn.byId=function(n,t){try{var e=r("#"+n);if(n in rn==!1){if(0===e.length)return!1;var l,u,s=e.html();s in Z?(l=Z.code,u=Z.func):(l=M(s),u=new Function("data","attrData",l)),Z[s]={func:u,code:l},rn[n]={func:u,code:l,template:s}}return rn[n].func.call(r.tera,t,e.data())}catch(a){var i={template:rn[n]&&rn[n].template,code:rn[n]&&rn[n].code,data:r.extend(!0,{},t),error:a.message};throw JSON&&JSON.stringify&&(i.data_json=JSON.stringify(t)),Y.push(i),a}},nn.json=JSON&&JSON.stringify||function(){throw new Error("JSON object is not provided")},nn.keys=Object.keys||function(){"use strict";var r=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=t.length;return function(l){if("object"!=typeof l&&("function"!=typeof l||null===l))throw new TypeError("Object.keys called on non-object");var u,s,a=[];for(u in l)r.call(l,u)&&a.push(u);if(n)for(s=0;e>s;s++)r.call(l,t[s])&&a.push(t[s]);return a}}(),nn.values=function(n){if(r.isArray(n))return n;for(var t=[],e=0,l=this.keys(n),u=l.length;u>e;e++)t.push(n[l[e]]);return t},nn.escape=function(r){return(""+r).replace(/[&<'"]/g,function(r){switch(r[0]){case"&":return"&amp;";case"<":return"&lt;";case"'":return"&#39;";case'"':return"&quot;"}})},nn.proto=Object.create||function(r){var n=function(){};return n.prototype=r,new n},nn.errors=function(){return Y},nn.cache=function(){return Z},nn.cacheById=function(){return rn},nn.lastError=function(){return Y[Y.length-1]},nn.clearCache=function(){Z={},rn={}},r.tera=nn,r(function(){r('script[type="text/template-tera"]').each(function(){var n,t,e,l;try{n=r(this).attr("id"),t=r(this).html(),e=M(t),l=new Function("data","attrData",e),Z[t]={func:l,code:e},rn[n]={func:l,code:e,template:t}}catch(u){throw Y.push({template:t,code:e,error:u.message}),u}})})}(jQuery);